<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Terminal</title>
<style>
  body {
    margin: 0;
    background: black;
    color: #00ff9c;
    font-family: "Courier New", monospace;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Pantalla inicio */
  #startScreen {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  #startBtn {
    background: black;
    color: #00ff9c;
    border: 2px solid #00ff9c;
    padding: 14px 30px;
    font-family: "Courier New", monospace;
    font-size: 18px;
    cursor: pointer;
    box-shadow: 0 0 15px #00ff9c88;
    transition: all 0.3s ease;
  }

  #startBtn:hover {
    background: #00ff9c;
    color: black;
    box-shadow: 0 0 25px #00ff9c;
  }

  .terminal {
    width: 90%;
    max-width: 750px;
    border: 1px solid #00ff9c;
    padding: 20px;
    box-shadow: 0 0 20px #00ff9c55;
    display: none;
  }

  .input-line {
    display: flex;
  }

  .prompt {
    margin-right: 5px;
  }

  input {
    background: black;
    border: none;
    color: #00ff9c;
    outline: none;
    font-family: inherit;
    font-size: 16px;
    flex: 1;
  }
</style>
</head>
<body>

<!-- PANTALLA INICIAL -->
<div id="startScreen">
  <button id="startBtn">üíñ Iniciar invitaci√≥n</button>
</div>

<!-- TERMINAL -->
<div class="terminal" id="terminal"></div>

<audio id="keySound" preload="auto">
  <source src="key.mp3" type="audio/mpeg">
</audio>

<script>
const terminal = document.getElementById("terminal");
const sound = document.getElementById("keySound");
const startBtn = document.getElementById("startBtn");
const startScreen = document.getElementById("startScreen");

let audioUnlocked = false;

// volumen suave y rom√°ntico
sound.volume = 0.2;

// üîä sonido tecla
function playKeySound() {
  if (!audioUnlocked) return;
  sound.currentTime = 0;
  sound.play();
}

// üîì desbloqueo audio
function unlockAudio() {
  if (audioUnlocked) return;

  sound.volume = 0;
  sound.play().then(() => {
    sound.pause();
    sound.currentTime = 0;
    sound.volume = 0.2;
    audioUnlocked = true;
  });
}

const lines = [
  "> initializing feelings...",
  "> loading memories... ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%",
  "> checking compatibility with Rowan...",
  "> result: PERFECT MATCH üíñ",
  "",
  "> question:",
  "> Rowan, ¬øaceptas ser mi San Valent√≠n este 14 de febrero?"
];

let line = 0;
let char = 0;

// ‚úçÔ∏è escritura inicial
function typeLine() {
  if (line < lines.length) {
    if (char < lines[line].length) {
      terminal.innerHTML += lines[line].charAt(char);
      playKeySound();
      char++;
      setTimeout(typeLine, 80);
    } else {
      terminal.innerHTML += "<br>";
      char = 0;
      line++;
      setTimeout(typeLine, 400);
    }
  } else {
    showInput();
  }
}

// ‚å®Ô∏è input usuario
function showInput() {
  terminal.innerHTML += `
    <div class="input-line">
      <span class="prompt">></span>
      <input type="text" id="userInput" autofocus />
    </div>
  `;
  const input = document.getElementById("userInput");
  input.addEventListener("keydown", handleInput);
}

function handleInput(e) {
  playKeySound();

  if (e.key === "Enter") {
    const value = e.target.value.toLowerCase();
    terminal.innerHTML += `<br>> ${value}<br>`;
    e.target.parentElement.remove();

    if (value === "yes" || value === "s√≠" || value === "si") {
      success();
    } else {
      terminal.innerHTML += `> invalid option<br>> hint: escribe "yes" üòâ<br>`;
      showInput();
    }
  }
}

// ‚≠ê animaci√≥n reutilizable
function typeCustomLines(customLines) {
  let l = 0;
  let c = 0;

  function write() {
    if (l < customLines.length) {
      if (c < customLines[l].length) {
        terminal.innerHTML += customLines[l].charAt(c);
        playKeySound();
        c++;
        setTimeout(write, 80);
      } else {
        terminal.innerHTML += "<br>";
        c = 0;
        l++;
        setTimeout(write, 400);
      }
    }
  }

  write();
}

// üíñ final
function success() {
  const finalLines = [
    "> request accepted üíñ",
    "> date confirmed: 14/02",
    "> message:",
    "> Ya quiero que sea 14....",
    "> ...",
    "> ...",
    "> nos vemos amor m√≠o ‚ù§Ô∏è"
  ];

  typeCustomLines(finalLines);
}

// ‚ñ∂Ô∏è BOT√ìN INICIO
startBtn.addEventListener("click", () => {
  unlockAudio();
  startScreen.style.display = "none";
  terminal.style.display = "block";
  typeLine();
});
</script>

</body>
</html>
